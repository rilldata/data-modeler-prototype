## SQL parser and protobuf builder generation
Please run `mvn package` in the module to generate the custom SQL parser and protobuf builder classes.
You need to have proto compiler installed on the system, here are some resources for installation instructions - 
1. http://google.github.io/proto-lens/installing-protoc.html
2. https://github.com/protocolbuffers/protobuf#protocol-compiler-installation
### Code generation paths -
* Custom parser will be generated in `target/generated-sources/javacc` folder
* Protobuf classes will be generated in `target/generated-sources/annotations` folder

Dev Note - Please mark `target/generated-sources` directory as **Sources Root** if generated code is not recognized by the IDE.

## Preliminary notes regarding native build
* Configs in `graalcfg` is auto-generated by GraalVM Tracing Agent. In theory, they can be edited manually as Tracing Agent doesn't
delete entries (it's append only mode).
* com.rilldata.RegisterAtRuntime is based on substrait-java (see https://github.com/substrait-io/substrait-java) and their experience
compiling Apache Calcite to a native-executable.

## Native library build process
1. Download GraalVM (https://www.graalvm.org/downloads/)
1. Install native-image:
     
    gu install native-image
1. Execute maven profile:
       
   mvn package -Pnative-lib

## Native executable buid process 
(Executable can be useful for testing without Go Runtime.)
   
    mvn package -Pnative-executable

   Try to run the executable:
    
    ./target/sql "select 1"

## Running Tracing Agent
See https://www.graalvm.org/22.0/reference-manual/native-image/Agent/
In short, Tracing Agent produces configs in `graalcfg` that tells `native-image` compiler which classes/resources will be 
loaded/created during runtime. Tracing Agent requires the Java bytecode be run in JVM.
   
    ./run-agent.sh

It can be necessary to run the target application more than once with different inputs to trigger separate execution paths 
for a better coverage of dynamic accesses. In case native-image compiler will start to complain or native-executable will produce
exceptions about unknown classes then Tracing Agent can help to identify new configuration entries and merge them to the existing 
configuration.